---
layout: post
title: 架构学习笔记
category: 技术
keywords: 架构
---

# 从0开始学架构_笔记_1

## 架构到底是指什么
  * 软件架构指软件系统的顶层结构
  * 模块和组件
    - 从逻辑的角度来拆分系统后，得到的单元就是“模块”；从物理的角度来拆分系统后，得到的单元就是“组件”。划分模块的主要目的是职责分离；划分组件的主要目的是单元复用。

## 架构设计的真正目的
  * 架构设计的主要目的是为了解决软件系统复杂度带来的问题

## 复杂度的来源
  * 高性能
    - 单台计算机内部为了高性能带来的复杂度
    - 多台计算机集群为了高性能带来的复杂度
    - 负载均衡、多路复用
  * 高可用
    - 通过冗余增强了可用性，但同时也带来了复杂性
    - 计算高可用
    - 存储高可用
    - 主备方案、集群方案
  * 可扩展性
    - 设计具备良好可扩展性的系统，有两个基本条件：正确预测变化、完美封装变化
      - 一个具备良好可扩展性的架构设计应当符合开闭原则：对扩展开放，对修改关闭。
    - 分层、插件化等技术
  * 成本
    - 低成本本质上是与高性能和高可用冲突的，所以低成本很多时候不会是架构设计的首要目标，而是架构设计的附加约束。
    - 低成本给架构设计带来的主要复杂度体现在，往往只有“创新”才能达到低成本目标
  * 安全
    - 功能上的安全 -防小偷
      - 常见的 XSS 攻击、CSRF 攻击、SQL 注入、Windows 漏洞、密码破解等，本质上是因为系统实现有漏洞，黑客有了可乘之机。
      - 从实现的角度来看，功能安全更多地是和具体的编码相关，与架构关系不大
    - 架构上的安全 -防强盗
      - 传统的架构安全主要依靠防火墙，防火墙最基本的功能就是隔离网络，通过将网络划分成不同的区域
      - 互联网系统的架构安全目前并没有太好的设计手段来实现，更多地是依靠运营商或者云服务商强大的带宽和流量清洗的能力，较少自己来设计和实现。
  * 规模
    - 规模带来复杂度的主要原因就是“量变引起质变”
    - 功能越来越多，导致系统复杂度指数级上升
    - 数据越来越多，系统复杂度发生质变
      - MySQL单表推荐在5000万行左右

## 架构设计三原则
  * 合适原则
    - 合适原则宣言：“合适优于业界领先”。
  * 简单原则
    - 简单原则宣言：“简单优于复杂”。
  * 演化原则
    - 演化原则宣言：“演化优于一步到位”。
    - 软件架构需要根据业务发展不断变化

## 架构设计流程
  * 识别复杂度
    - 将主要的复杂度问题列出来，然后根据业务、技术、团队等综合情况进行排序，优先解决当前面临的最主要的复杂度问题
    - 有经验的架构师可能一看需求就知道复杂度大概在哪里；如果经验不足，那只能采取“排查法”，从不同的角度逐一进行分析。
      - 对于架构师来说，常见系统的性能量级需要烂熟于心
  * 设计备选方案
    - 架构设计备选方案的工作更多的是从需求、团队、技术、资源等综合情况出发，对主流、成熟的架构模式进行选择、组合、调整、创新。
      - 备选方案的数量以 3 ~ 5 个为最佳。最好是“三方案”，又叫“第三选择”，可以防止思维狭隘，目光短浅，思维盲区等决策陷阱
      - 备选方案的差异要比较明显
      - 备选方案的技术不要只局限于已经熟悉的技术
      - 备选方案不要过于详细。备选阶段解决的是技术选型问题，而不是技术细节
  * 评估和选择备选方案
    - 列出我们需要关注的质量属性点，然后分别从这些质量属性的维度去评估每个方案，再综合挑选适合当时情况的最优方案
      - 常见的方案质量属性点有：性能、可用性、硬件成本、项目投入、复杂度、安全性、可扩展性等。
    - 正确的做法是按优先级选择，即架构师综合当前的业务发展情况、团队人员规模和技能、业务发展预测等因素，将质量属性按照优先级排序，首先挑选满足第一优先级的，如果方案都满足，那就再看第二优先级……以此类推。
  * 详细方案设计
    - 简单来说，详细方案设计就是将方案涉及的关键技术细节给确定下来。
